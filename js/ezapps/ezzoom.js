function convertFromJson(e){var t=new RegExp("[^0-9\\"+e.format.decimalSymbol+"]","g");$$("span.price").each(function(n){n.innerHTML=formatCurrency(n.innerHTML.replace(t,"")*e.conversionRate,e.format)});conversionRate=e.conversionRate;if(typeof optionsPrice!="undefined"){optionsPrice.priceTemplate=new Template(e.userTemplate);optionsPrice.priceFormat=e.format;optionsPrice.formatPrice=function(e){return formatCurrency(e*conversionRate,this.priceFormat)}}if(typeof spConfig!="undefined"){spConfig.priceTemplate=new Template(e.userTemplate);spConfig.formatPrice=function(e,t){var n="";e=parseFloat(e)*conversionRate;if(t){if(e<0){n+="-";e=-e}else{n+="+"}}var r=(Math.round(e*100)/100).toString();if(this.prices&&this.prices[r]){n+=this.prices[r]}else{n+=this.priceTemplate.evaluate({price:e.toFixed(2)})}return n};$$(".super-attribute-select").each(function(e){spConfig.configureElement(e)})}if(typeof checkout!="undefined"){checkout.gotoSection=function(t){t=$("opc-"+t);t.addClassName("allow");this.accordion.openSection(t);var n=new RegExp("[^0-9\\"+e.format.decimalSymbol+"]","g");$$("span.price").each(function(t){t.innerHTML=formatCurrency(t.innerHTML.replace(n,"")*e.conversionRate,e.format)})}}}var conversionRate=1;Ajax.JSONRequest=Class.create(Ajax.Base,function(){var e=0,t=document.getElementsByTagName("head")[0]||document.body;return{initialize:function(e,t,n){e(n);this.options.url=t;this.options.callbackParamName=this.options.callbackParamName||"callback";this.options.timeout=this.options.timeout||10;this.options.invokeImmediately=!Object.isUndefined(this.options.invokeImmediately)?this.options.invokeImmediately:true;if(!Object.isUndefined(this.options.parameters)&&Object.isString(this.options.parameters)){this.options.parameters=this.options.parameters.toQueryParams()}if(this.options.invokeImmediately){this.request()}},_cleanup:function(){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}if(this.transport&&Object.isElement(this.transport)){this.transport.remove();this.transport=null}},request:function(){var n=new Ajax.JSONResponse(this);var r=this.options.callbackParamName,i="_prototypeJSONPCallback_"+e++,s=function(){if(Object.isFunction(this.options.onComplete)){this.options.onComplete.call(this,n)}Ajax.Responders.dispatch("onComplete",this,n)}.bind(this);if(this.options.parameters[r]!==undefined){i=this.options.parameters[r]}else{this.options.parameters[r]=i}this.options.parameters[r]=i;var o=this.options.url+((this.options.url.include("?")?"&":"?")+Object.toQueryString(this.options.parameters));window[i]=function(e){this._cleanup();window[i]=undefined;n.status=200;n.statusText="OK";n.setResponseContent(e);if(Object.isFunction(this.options.onSuccess)){this.options.onSuccess.call(this,n)}Ajax.Responders.dispatch("onSuccess",this,n);s()}.bind(this);this.transport=new Element("script",{type:"text/javascript",src:o});if(Object.isFunction(this.options.onCreate)){this.options.onCreate.call(this,n)}Ajax.Responders.dispatch("onCreate",this);t.appendChild(this.transport);this.timeout=setTimeout(function(){this._cleanup();window[i]=Prototype.emptyFunction;if(Object.isFunction(this.options.onFailure)){n.status=504;n.statusText="Gateway Timeout";this.options.onFailure.call(this,n)}s()}.bind(this),this.options.timeout*1e3)},toString:function(){return"[object Ajax.JSONRequest]"}}}());Ajax.JSONResponse=Class.create({initialize:function(e){this.request=e},request:undefined,status:0,statusText:"",responseJSON:undefined,responseText:undefined,setResponseContent:function(e){this.responseJSON=e;this.responseText=Object.toJSON(e)},getTransport:function(){if(this.request)return this.request.transport},toString:function(){return"[object Ajax.JSONResponse]"}})